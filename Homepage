<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphics Nepal - Admin Console</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v-6h-2v6zm0-8h2V7h-2v2z' fill='%233b82f6'/%3E%3C/svg%3E" type="image/svg+xml">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-primary: #3b82f6; /* Modern Blue */
            --color-secondary: #10b981; /* Teal/Emerald for Success */
            --color-background: #f4f6f8; /* Very light grey for backdrop */
            --color-surface: #ffffff;
            --color-text: #1f2937; /* Darker text */
            --color-text-muted: #6b7280;
            --color-border: #e5e7eb;
            --radius-card: 16px;
            --shadow-soft: 0 10px 30px rgba(17, 24, 39, 0.05);
            --font-family-main: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            --color-danger: #ef4444; /* Red for Delete/Danger */
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family-main);
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        a {
            color: var(--color-primary);
            text-decoration: none;
        }
        
        button {
            transition: all 0.2s ease;
        }
        
        button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* --- HEADER --- */
        .main-header {
            background-color: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 20;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .main-header-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 14px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .site-title {
            margin: 0;
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--color-text);
        }

        .site-title span {
            color: var(--color-primary);
        }
        
        /* --- MAIN LAYOUT --- */
        .dashboard-main-area {
            max-width: 1400px;
            margin: 24px auto 32px;
            padding: 0 30px;
            display: grid;
            grid-template-columns: 240px minmax(0, 1fr);
            gap: 28px;
        }

        @media (max-width: 1024px) {
            .dashboard-main-area {
                grid-template-columns: 1fr;
                padding: 0 20px;
            }
        }

        /* --- SIDEBAR MENU --- */
        .dashboard-sidebar {
            background-color: var(--color-surface);
            border-radius: var(--radius-card);
            border: 1px solid var(--color-border);
            padding: 15px 10px; 
            align-self: start; 
            box-shadow: var(--shadow-soft);
        }

        .sidebar-heading {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-text-muted);
            margin: 16px 12px 6px;
            font-weight: 600;
        }

        .dashboard-sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .dashboard-sidebar a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            border-radius: 10px;
            color: var(--color-text);
            font-size: 0.95rem;
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s;
        }

        .dashboard-sidebar a:hover {
            background-color: #eef2ff;
            color: var(--color-primary);
        }

        .dashboard-sidebar a.active {
            background-color: var(--color-primary);
            color: var(--color-surface);
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
        }
        
        .icon-svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            fill: currentColor;
            opacity: 0.7;
        }
        
        .dashboard-sidebar a.active .icon-svg {
            fill: var(--color-surface);
            opacity: 1;
        }

        /* --- MAIN CONTENT AREA (TAB CONTAINER) --- */
        .content-container {
            min-height: 600px;
        }

        /* Dashboard Grid */
        .quick-access-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
            margin-top: 20px;
        }

        .quick-access-tile {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 180px;
            padding: 24px;
            border-radius: var(--radius-card);
            border: 1px solid var(--color-border);
            background-color: var(--color-surface);
            box-shadow: var(--shadow-soft);
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--color-text);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-access-tile:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 45px rgba(17, 24, 39, 0.08);
        }

        .tile-icon {
            width: 48px;
            height: 48px;
            fill: var(--color-primary);
            margin-bottom: 15px;
            opacity: 0.9;
        }

        /* Specific Tile Colors */
        .tile-lead-management .tile-icon { fill: #f59e0b; }
        .tile-client-directory .tile-icon { fill: var(--color-secondary); }
        .tile-social-insights .tile-icon { fill: #1877f2; }
        .tile-system-settings .tile-icon { fill: #4f46e5; }
        
        .tile-label {
            margin-top: 10px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .tile-link-text {
            font-size: 0.8rem;
            color: var(--color-primary);
            margin-top: 5px;
            display: block;
        }
        
        /* General Card & Tab Styling */
        .dashboard-card {
            background-color: var(--color-surface);
            border-radius: var(--radius-card);
            border: 1px solid var(--color-border);
            padding: 20px 24px;
            box-shadow: var(--shadow-soft);
        }
        
        .full-width-card {
            grid-column: 1 / -1;
        }
        
        .tab-content {
            display: none;
            padding: 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* --- LEAD MANAGEMENT STYLES (New) --- */
        .email-list-container {
            margin-top: 20px;
            max-height: 350px;
            overflow-y: auto;
            border: 1px solid var(--color-border);
            border-radius: 10px;
        }
        
        .email-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid var(--color-border);
            background-color: var(--color-surface);
            font-size: 0.95rem;
        }
        
        .email-item:last-child {
            border-bottom: none;
        }
        
        .delete-email-btn {
            background: none;
            border: none;
            color: var(--color-danger);
            cursor: pointer;
            font-weight: 600;
            padding: 5px;
            border-radius: 5px;
            line-height: 1;
        }
        
        .delete-email-btn:hover {
            background-color: #fee2e2;
        }
        
        .add-email-form {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .add-email-form input[type="email"] {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .add-email-form button {
            background-color: var(--color-secondary);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        /* --- UPDATES TAB STYLES (New) --- */
        .updates-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .updates-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .update-card {
            border-left: 5px solid var(--color-primary);
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .update-card:hover {
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }
        
        .update-card.critical {
            border-left-color: var(--color-danger);
        }
        
        .update-card h4 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            color: var(--color-primary);
        }
        
        .update-card.critical h4 {
            color: var(--color-danger);
        }
        
        .update-card p {
            font-size: 0.9rem;
            color: var(--color-text-muted);
            margin: 0;
        }
        
        .update-card small {
            display: block;
            margin-top: 8px;
            font-size: 0.75rem;
            font-weight: 500;
            color: #9ca3af;
        }

        /* --- FOOTER --- */
        .main-footer {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 30px;
            text-align: center;
            font-size: 0.85rem;
            color: var(--color-text-muted);
            border-top: 1px solid var(--color-border);
            margin-top: 30px;
        }
    </style>
</head>
<body>

<header class="main-header">
    <div class="main-header-inner">
        <h1 class="site-title">
            Graphics Nepal <span>Admin</span>
        </h1>
        </div>
</header>

<main class="dashboard-main-area">
    
    <aside class="dashboard-sidebar">
        <h3 class="sidebar-heading">Main Navigation</h3>
        <ul id="main-nav">
            <li>
                <a href="#tab-dashboard" class="nav-link active">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                    Dashboard
                </a>
            </li>
            <li>
                <a href="#tab-updates" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21 10c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 4.25 2.91 7.82 6.83 8.71L12 23l2.17-4.29C17.09 17.82 20 14.25 20 10zm-9 7l-2.17 4.29c-3.5-0.78-6.17-3.92-6.17-7.29 0-3.86 3.14-7 7-7s7 3.14 7 7c0 3.86-3.14 7-7 7z"></path></svg>
                    Updates & News
                </a>
            </li>
        </ul>
        
        <h3 class="sidebar-heading">Data Modules</h3>
        <ul id="data-nav">
            <li>
                <a href="#tab-lead-management" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.38 0 2.5 1.12 2.5 2.5S13.38 10 12 10 9.5 8.88 9.5 7.5 10.62 5 12 5zm-3.5 6h7c.83 0 1.5.67 1.5 1.5v3c0 .83-.67 1.5-1.5 1.5h-7c-.83 0-1.5-.67-1.5-1.5v-3c0-.83.67-1.5 1.5-1.5z"></path></svg>
                    Lead Management
                </a>
            </li>
            <li>
                <a href="#tab-membership-list" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 11h-1V3H7v4H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2zm0 8H6V9h10v10zM12 15.5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></svg>
                    Client Directory
                </a>
            </li>
        </ul>

        <h3 class="sidebar-heading">Tools & Settings</h3>
        <ul id="tool-nav">
            <li>
                <a href="#tab-social" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 3H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l-1.66 2.5.38.38 2.82-2.82h5.5l2.82 2.82.38-.38L16 19h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H4V5h16v12z"></path></svg>
                    Social Insights
                </a>
            </li>
            <li>
                <a href="#tab-settings" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.2-.17.25-.43.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.4-1.09-.76-1.72-1.03L15 2.5c-.06-.2-.25-.34-.46-.34H9.46c-.21 0-.4.14-.46.34l-.47 2.49c-.63.27-1.2.63-1.72 1.03l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.21-.08.47-.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.2.17-.25.43-.12.64l2 3.46c.12.22.39.31.61.22l2.49-1c.52.4 1.09.76 1.72 1.03l.47 2.49c.06.2.25.34.46.34h5.08c.21 0 .4-.14.46-.34l.47-2.49c.63-.27 1.2-.63 1.72-1.03l2.49 1c.22.09.49 0 .61-.22l2-3.46c.13-.21.08-.47-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></svg>
                    System Settings
                </a>
            </li>
            <li>
                 <a href="#tab-backup" class="nav-link">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-3.72 0-6.81 2.53-7.7 6.07C2.12 11.23 1 13.1 1 15c0 3.87 3.13 7 7 7h11c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 18H9v-2h8v2zm-4-4h-4v-2h4v2z"></path></svg>
                    Server Backup
                 </a>
            </li>
        </ul>
        
          <h3 class="sidebar-heading">External</h3>
        <ul id="external-nav">
            <li>
                <a href="https://sites.google.com/view/graphicsnepal565/home" target="_blank">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.75 16.5l4.5-4.5-4.5-4.5L11.25 10.5l3 1.5-3 1.5-1.5-1.5v3z"></path></svg>
                    Google Site
                </a>
            </li>
        </ul>
    </aside>

    <section class="content-container">

        <div id="tab-dashboard" class="tab-content active">
            
            <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px; font-weight: 700;">
                üëã Admin Panel Quick Access
            </h2>
            
            <div class="quick-access-grid">
                
                <a href="#tab-lead-management" class="quick-access-tile tile-lead-management nav-link-trigger">
                    <svg class="tile-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.38 0 2.5 1.12 2.5 2.5S13.38 10 12 10 9.5 8.88 9.5 7.5 10.62 5 12 5zm-3.5 6h7c.83 0 1.5.67 1.5 1.5v3c0 .83-.67 1.5-1.5 1.5h-7c-.83 0-1.5-.67-1.5-1.5v-3c0-.83.67-1.5 1.5-1.5z"></path></svg>
                    Lead Manager
                    <span class="tile-link-text">Full CRM View &gt;</span>
                </a>

                <a href="#tab-membership-list" class="quick-access-tile tile-client-directory nav-link-trigger">
                    <svg class="tile-icon" viewBox="0 0 24 24"><path d="M16 11h-1V3H7v4H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2zm0 8H6V9h10v10zM12 15.5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></svg>
                    Client Directory
                    <span class="tile-link-text">145 Active Clients &gt;</span>
                </a>
                
                <a href="#tab-updates" class="quick-access-tile nav-link-trigger" style="background-color: #f7f7ff;">
                    <svg class="tile-icon" viewBox="0 0 24 24" style="fill: #7c3aed;"><path d="M21 10c0-4.97-4.03-9-9-9s-9 4.03-9 9c0 4.25 2.91 7.82 6.83 8.71L12 23l2.17-4.29C17.09 17.82 20 14.25 20 10zm-9 7l-2.17 4.29c-3.5-0.78-6.17-3.92-6.17-7.29 0-3.86 3.14-7 7-7s7 3.14 7 7c0 3.86-3.14 7-7 7z"></path></svg>
                    Updates Center
                    <span class="tile-link-text" style="color: #7c3aed;">4 New Announcements &gt;</span>
                </a>

                <a href="#tab-social" class="quick-access-tile tile-social-insights nav-link-trigger">
                    <svg class="tile-icon" viewBox="0 0 24 24"><path d="M20 3H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l-1.66 2.5.38.38 2.82-2.82h5.5l2.82 2.82.38-.38L16 19h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H4V5h16v12z"></path></svg>
                    Social Insights
                    <span class="tile-link-text">View Analytics &gt;</span>
                </a>
                
                <a href="#tab-backup" class="quick-access-tile tile-system-settings nav-link-trigger" style="background-color: #f0fdf4;">
                    <svg class="tile-icon" viewBox="0 0 24 24" style="fill: #059669;"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-3.72 0-6.81 2.53-7.7 6.07C2.12 11.23 1 13.1 1 15c0 3.87 3.13 7 7 7h11c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 18H9v-2h8v2zm-4-4h-4v-2h4v2z"></path></svg>
                    Server Backup
                    <span class="tile-link-text" style="color: #059669;">Run Now &gt;</span>
                </a>
                
                <article class="dashboard-card" style="grid-column: span 2; margin-top: 5px;">
                    <h2 style="font-size: 1.1rem; font-weight: 700; margin-bottom: 10px;">Quick Notepad (.txt Export)</h2>
                    <textarea id="notepad-content" placeholder="Write quick notes for a post, task, or reminder here. Click 'Save to File' to download as a TXT file." style="min-height: 120px; border-radius: 10px; border: 1px solid var(--color-border); padding: 10px; width: 100%; font-family: var(--font-family-main); font-size: 0.9rem;"></textarea>
                    <button onclick="saveNotepadToTxt()" style="display: inline-flex; margin-top: 10px; padding: 8px 15px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; background-color: #f97316; color: #ffffff; border: none; cursor: pointer;">
                        Save to .txt File
                    </button>
                </article>
            </div>
            
        </div>
        
        <div id="tab-lead-management" class="tab-content">
            <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                üìß Lead Management: Email List
            </h2>
            
            <div class="dashboard-card full-width-card">
                <h3 style="margin-top: 0;">Add New Email Lead</h3>
                <div class="add-email-form">
                    <input type="email" id="new-lead-email" placeholder="Enter new lead's email address" required>
                    <button onclick="addEmailLead()">Add Lead</button>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 10px;">Current Lead Emails (<span id="lead-count">5</span>)</h3>
                <div class="email-list-container" id="email-list">
                    </div>
            </div>
        </div>

        <div id="tab-membership-list" class="tab-content">
            <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                üë• Client Directory (Search & Profiles)
            </h2>
            <div class="dashboard-card full-width-card" style="min-height: 300px; display: flex; align-items: center; justify-content: center;">
                <p style="font-size: 1.2rem; color: var(--color-text-muted);">
                    List of all active clients, search bar, and detailed profiles.
                </p>
            </div>
        </div>
        
        <div id="tab-updates" class="tab-content">
            <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                üì¢ System Updates & News
            </h2>
            <div class="dashboard-card full-width-card">
                <h3 style="color: var(--color-primary); margin-top: 0;">Latest Announcements</h3>
                
                <div class="updates-grid">
                    <div class="dashboard-card update-card">
                        <h4>CRM Version 3.1 Released</h4>
                        <p>Major stability update, faster lead processing, and new client tags enabled.</p>
                        <small>Posted: November 1, 2025</small>
                    </div>
                    
                    <div class="dashboard-card update-card critical">
                        <h4>üö® Critical Security Patch Applied</h4>
                        <p>All users must log out and log back in to apply the latest security fixes for the API layer.</p>
                        <small>Posted: October 28, 2025</small>
                    </div>
                    
                    <div class="dashboard-card update-card">
                        <h4>New Tutorial: Social Posting Guide</h4>
                        <p>Check out the new guide in System Settings > Help to optimize your social media output.</p>
                        <small>Posted: October 15, 2025</small>
                    </div>
                    
                    <div class="dashboard-card update-card">
                        <h4>Client Portal Scheduled Maintenance</h4>
                        <p>The client portal will be offline from 1 AM to 4 AM on 11/15 for server upgrades.</p>
                        <small>Posted: October 10, 2025</small>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-social" class="tab-content">
             <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                üìà Social Media Insights
            </h2>
             <div class="dashboard-card full-width-card" style="min-height: 300px; display: flex; align-items: center; justify-content: center;">
                <p style="font-size: 1.2rem; color: var(--color-text-muted);">
                    External API data visualization for social performance.
                </p>
            </div>
        </div>
        
        <div id="tab-settings" class="tab-content">
             <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                ‚öôÔ∏è System Settings
            </h2>
             <div class="dashboard-card full-width-card" style="min-height: 300px; display: flex; align-items: center; justify-content: center;">
                <p style="font-size: 1.2rem; color: var(--color-text-muted);">
                    User profile, security, and preferences.
                </p>
            </div>
        </div>
        
        <div id="tab-backup" class="tab-content">
             <h2 style="font-size: 1.8rem; margin-top: 0; margin-bottom: 20px;">
                üíæ Server Backup & Maintenance
            </h2>
             <div class="dashboard-card full-width-card" style="min-height: 300px; display: flex; flex-direction: column; align-items: center; justify-content: center; background-color: #f5f3ff;">
                <p style="font-size: 1.2rem; color: #6d28d9; text-align: center;">
                    **Dedicated area for running server tasks and backups.**
                    <br>
                    *This is the core "data server" control panel.*
                </p>
                <button onclick="backupDataToJson()" style="display: inline-flex; margin-top: 20px; padding: 12px 25px; border-radius: 10px; font-size: 1rem; font-weight: 700; background-color: #4f46e5; color: #ffffff; border: none; cursor: pointer;">
                    Run Full Backup to JSON
                </button>
                <small style="margin-top: 15px; color: #6d28d9;">(This function will download a single JSON file containing simulated data.)</small>
            </div>
        </div>

    </section>
</main>

<footer class="main-footer">
    <p>
        &copy; 2025 Graphics Nepal Admin. Clean, efficient, and simple.
    </p>
</footer>

<script>
    // Mock data for Lead Management
    let leadEmails = [
        "john.doe@example.com",
        "jane.smith@client.net",
        "info@marketingpro.org",
        "support@webdev.co",
        "contact@businesshub.com"
    ];

    /* --- TAB SWITCHING LOGIC --- */
    const changeTab = (targetId) => {
        // Handle external links by letting them execute their default action
        if (targetId.startsWith('http')) return; 

        // Deactivate all sidebar links
        document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
        
        // Deactivate all content tabs
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

        // Activate the corresponding sidebar link
        const activeLink = document.querySelector(`.dashboard-sidebar a[href="${targetId}"]`);
        if (activeLink) activeLink.classList.add('active');

        // Activate the corresponding content tab
        const activeContent = document.querySelector(targetId);
        if (activeContent) activeContent.classList.add('active');
        
        // Update URL hash for sharing
        window.history.pushState(null, null, targetId);
    };

    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('.nav-link, .nav-link-trigger');

        // Event listeners for sidebar links and quick access tiles
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const targetId = link.getAttribute('href');
                if (targetId.startsWith('#')) {
                    e.preventDefault();
                    changeTab(targetId);
                }
            });
        });
        
        // Check URL hash on load to set initial tab
        if (window.location.hash) {
            changeTab(window.location.hash);
        } else {
            changeTab('#tab-dashboard');
        }
        
        // Initialize Lead Management list
        renderEmailList();
    });

    /* --- LEAD MANAGEMENT FUNCTIONS --- */
    const renderEmailList = () => {
        const listContainer = document.getElementById('email-list');
        const leadCountSpan = document.getElementById('lead-count');
        listContainer.innerHTML = ''; // Clear current list
        
        leadEmails.forEach((email, index) => {
            const item = document.createElement('div');
            item.className = 'email-item';
            item.innerHTML = `
                <span>${email}</span>
                <button class="delete-email-btn" data-index="${index}" onclick="deleteEmailLead(${index})">
                    &#215; Delete
                </button>
            `;
            listContainer.appendChild(item);
        });
        
        leadCountSpan.textContent = leadEmails.length;
    };

    const addEmailLead = () => {
        const input = document.getElementById('new-lead-email');
        const email = input.value.trim();
        
        if (email && email.includes('@') && !leadEmails.includes(email)) {
            leadEmails.push(email);
            renderEmailList();
            input.value = '';
            alert(`Email lead '${email}' added.`);
        } else if (leadEmails.includes(email)) {
            alert("Error: This email is already in the list.");
        } else {
            alert("Error: Please enter a valid email address.");
        }
    };

    const deleteEmailLead = (index) => {
        if (confirm(`Are you sure you want to delete the lead: ${leadEmails[index]}?`)) {
            leadEmails.splice(index, 1);
            renderEmailList();
            alert("Lead deleted successfully.");
        }
    };

    /* --- NOTEPAD / TXT SAVE FUNCTION --- */
    const saveNotepadToTxt = () => {
        const content = document.getElementById('notepad-content').value;
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `GraphicsNepal_Notes_${new Date().toISOString().slice(0, 10)}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        alert('Notes saved to file!');
    };

    /* --- BACKUP TO JSON FUNCTION --- */
    const backupDataToJson = () => {
        // Simulate data from the dashboard structure
        const backupData = {
            timestamp: new Date().toISOString(),
            system_name: document.title,
            lead_management: {
                total_leads: leadEmails.length,
                emails: leadEmails
            },
            client_directory: {
                total_clients: 145, // Hardcoded from tile
                last_backup: new Date(Date.now() - 86400000).toISOString() // 1 day ago
            },
            notepad_content: document.getElementById('notepad-content').value || "Notepad was empty.",
            updates_feed: [
                { title: "CRM Version 3.1 Released", date: "November 1, 2025" },
                { title: "Critical Security Patch Applied", date: "October 28, 2025" }
            ],
            // This is a common way to serialize an entire HTML element, though in a real app,
            // you'd only backup essential server data.
            html_structure_backup: document.documentElement.outerHTML.substring(0, 500) + '...' // First 500 chars of HTML
        };

        const jsonString = JSON.stringify(backupData, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `GraphicsNepal_Backup_${new Date().toISOString().replace(/:/g, '-')}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        alert('Full data backup saved as JSON file!');
    };
</script>

</body>
</html>
